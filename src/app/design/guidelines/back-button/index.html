<stache
  pageTitle="Back button"
  navTitle="Back button"
  showTableOfContents="true">

  <stache-page-anchor>
    New page behavior
  </stache-page-anchor>

  <p>
    Actions where a user navigates to a new context, such as a new record, list, or section, should create new entries in the browser history with a new page title. The new entry enables users to select the browser's back button and return to the previous page or view.
  </p>
  <p>
    As a rule of thumb, create a new page in the browser history if the majority of the page content changes or a user would perceive a signficant change of context. Don't create a new URL or new browser entry for inline interactions such as steps in a wizard or opening a detail panel.
  </p>

  <div class="sky-subsection-heading">Focus</div>

  <p>
    After loading a new page, users should be able to use the tab key to reach the first focusable element on the page.
  </p>

  <div class="sky-subsection-heading">New page annoucement for screenreaders</div>

  <p>
    When a new page loads a SKY UX SPA, the page should behave similarly to what users would expect from a regular server-side application. The page should announce the page's &lt;title&gt; to the screen reader and inform users the page loaded via an ARIA live region when the &lt;title&gt;element is ready.
  </p>
  <p>
    Behaviors vary based on different browser and screen reader combinations, but SKY UX applications use the combination listed above.
  </p>

  <stache-page-anchor>
    Tabs and vertical tabs as site level navigation
  </stache-page-anchor>

  <p>
    If you use tabs as page navigation, each tab should be a page in the browser history, and users should be able to use the back button to return to the previous view. Tabs contain all of a page's content and can't be dismissed.
  </p>

  <div class="screenshot screenshot-info">
    <img src="~/assets/img/guidelines/back-button/tabs-backbutton.png" alt="Tabs as page navigation" style="width: 100%" />
  </div>

  <div class="sky-subsection-heading" style="margin-top: 20px;">Focus</div>

  <p>
    Based on guidance from <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#tabpanel">W3C's WAI-ARIA Authoring Practices for tabs</a>, maintain focus on activated tabs.
  </p>

  <div class="sky-subsection-heading">New page announcement for screenreaders</div>

  <p>
    Titles are announced as described in <a stacheRouterLink="." fragment="new-page-behavior">New page annoucement for screenreaders</a>.
  </p>

  <stache-page-anchor>
    Tabs as containers for viewing items
  </stache-page-anchor>

  <p>
    If tabs contain removable items such as lists or reports, don't include each tab in the browser history.
  </p>

	<div class="screenshot screenshot-info"> 
    <img src="~/assets/img/guidelines/back-button/tabcontainers-backbutton.png" alt="Tabs as page navigation" />
	</div>

<br>

  <sky-row>
    <sky-column>
      <img class="screenshot screenshot-info" src="~/assets/img/guidelines/back-button/verticaltabs-backbutton.png" alt="Vertical tabs as navigation" />
    </sky-column>
  </sky-row>

  <div class="sky-subsection-heading" style="margin-top: 20px;">Focus</div>

  <p>
    Based on guidance from <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#tabpanel">WAI-ARIA Authoring Practices for tabs</a>, maintain focus on activated tabs.
  </p>

  <div class="sky-subsection-heading">New page announcement for screenreaders</div>

  <p>
    This option doesn't require new page announcements. The selected tab receives an updated <sky-code>aria-selected="true"</sky-code> property which is communicated to assistive technologies.
  </p>

  <stache-page-anchor>
    Modals (all sizes)
  </stache-page-anchor>

  <p>
    When users open a modal from a SKY UX SPA, they should be able to use the back button to close the modal and return to the original context.
  </p>

  <div class="sky-subsection-heading">Avoid loss of work</div>

  <p>
    If a user selects the back button on a form with unsaved data, the SKY UX application asks the user if they want to close the form without saving their data or work using the confirmation dialog.
  </p>

  <div class="sky-subsection-heading">Focus</div>

  <p>
    In all circumstances, focus moves to an element contained in the dialog. Set the initial focus on the first focusable element unless a condition where doing otherwise is advisable.
  </p>

  <p>
    If focus on the first interactive element causes the content to scroll out of view, add <sky-code>tabindex=-1</sky-code> to a static element at the top of a dialog. For example, add the code to a dialog title or the first paragraph to initially focus the element. For more best practices, see <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#dialog_modal">W3C's WAI-ARIA Authoring Practices for Dialog (Modal)</a>.
  </p>

  <div class="sky-subsection-heading">New page annoucement for screenreaders</div>

  <p>
    This option doesn't require new page announcements.
  </p>

  <stache-page-anchor>
    Maintaining context
  </stache-page-anchor>

  <p>
    For inline interactions, determine the persistence level that makes sense for the change of state the user initiated. When users select the back button, return them to the context they left and donâ€™t make them re-orient, and in some cases re-interact with the system, to return to where they were.
  </p>

  <p>
    If you expect users to maintain a specific context within a SKY UX app, retain the UI component states across sessions. Examples include:
  </p>

  <ul>
    <li>
      Tile position
    </li>
    <li>
      Tile expanded/collapsed states
    </li>
    <li>
      Tab selected (list or tabs)
    </li>
    <li>
      Lists
    </li>
    <ul>
      <li>
        Sort order for a specific list
      </li>
      <li>
        Column choices for a specific list
      </li>
      <li>
        View state for a specific list
      </li>
      <li>
        Grid view, compact and regular, across lists
      </li>
    </ul>
    <li>
      Page context (e.g. user, credit card, environment)
    </li>
  </ul>




</stache>